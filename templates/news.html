<!-- Наследуемся от шаблона -->
{% extends 'flatpages/default.html' %}

<!-- Подключаем наш фильтр "брани" -->
{% load  my_filters %}

<!-- Название -->
{% block title %}
    Список новостей
{% endblock title %}

{% block body %}

    <div style="text-align: center;">
        <h2>
            СПИСОК НОВОСТЕЙ
        </h2>
    </div>
    <!-- Выводим количество новостей -->
    <div style="text-align: right;">
        <h7>
            Количество новостей: {{ posts|length }}
        </h7>
    </div>
    <hr>
<!-- Выводим новости только если они есть -->
    {% if posts %}
        <div style="text-align: center;">
            <table width="100%"> <!-- Создаем таблицу, и описываем ее-->
                <tr> <!-- Добавляем строку -->
                    <td align="center">Заголовок</td> <!-- Добавляем ячейку -->
                    <td align="center">Дата публикации</td> <!-- Добавляем ячейку -->
                    <td align="center">Текст поста</td> <!-- Добавляем ячейку -->
                    <td align="center">Тип поста</td> <!-- Добавляем ячейку -->
                </tr> <!-- Закрываем тег добавления строки -->


                <!-- Для каждой новости будете генерироваться новая строчка,
                т.е. новый HTML код, который указан в теле цикла.
                При этом сам цикл работает точно так же, как и в Python.
                post — переменная цикла, т.е. наша новость полученная из списка -->
                {% for post in posts %}
                    <tr>
                        <!-- Не забываем, что переменные в шаблоне ничем не отличаются
                        от переменных в Python. Здесь также можно получать доступ к
                        полям объекта модели. Например, здесь мы выводим название,
                        в следующем столбце дату написания, и т.д.  -->
                        <!-- Название нашей новости, проверяется нашим фильтром (принимающим в качестве аргумента название новости) -->
                        <td align="left"><a href={{ post.pk }}>{{ post.post_title|censore }}</a></td>
                        <!-- Дата публикации новости, выводим в формате день месяц год -->
                        <td align="center">{{ post.date_of_post|date:'d M Y' }}</td>
                        <!-- Текст новости, первые 20 символов при помощи фильтра, все остальные символы - многоточие -->
                        <td align="left">{{ post.post_text|truncatechars:20|censore }}</td>
                        <!-- Можно сделать фильтрацию по словам (вместо truncatechars использовать truncatewords) -->
                        <!-- Здесь идет условие по проверке типа нашей новости -->
                        {% if post.type_post == 'AR' %}
                            <td>Статья</td>
                        {% else %}
                            <td>Новость</td>
                        {% endif %}
                    </tr>
                {% endfor %}

            </table>
        </div>

<!-- Если новостей нет, то ... -->
    {% else %}
        <h2>НОВОСТЕЙ НЕТ</h2>
    {% endif %}

{% endblock body %}



